<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Search | Blogify</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <style>
    body {
      background: #1a2634;
      color: #ecf0f1;
      font-family: Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
    }
    .container {
      max-width: 900px;
      margin: 2rem auto;
      padding: 2rem;
      background: #243447;
      border-radius: 10px;
      box-shadow: 0 4px 14px rgba(0,0,0,0.3);
    }
    .message {
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 6px;
      font-size: 1rem;
    }
    .success {
      background-color: #d4edda;
      color: #155724;
    }
    .error {
      background-color: #f8d7da;
      color: #721c24;
    }
    .search-results h2 {
      color: #ecf0f1;
      margin-bottom: 1rem;
    }
    .user-result, .blog-result {
      background: #2c3e50;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .user-result img {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #3498db;
    }
    .user-result a, .blog-result a {
      color: #f1c40f;
      text-decoration: none;
    }
    .user-result a:hover, .blog-result a:hover {
      text-decoration: underline;
    }
    .user-details {
      flex: 1;
    }
    .user-details p {
      margin: 0;
    }
  </style>
</head>
<body>
  <%- include('partials/header', { user }) %>
  <div class="container">
    <% if (success_msg) { %>
      <div class="message success"><%= success_msg %></div>
    <% } %>
    <% if (error_msg) { %>
      <div class="message error"><%= error_msg %></div>
    <% } %>
    <h1>Search Results for "<%= query %>"</h1>
    
    <div class="search-results">
      <h2>Users</h2>
      <% if (users && users.length > 0) { %>
        <% users.forEach(user => { %>
          <div class="user-result">
            <a href="/profile/<%= user._id %>">
              <img src="<%= user.profileImageURL %>" alt="<%= user.fullname %>">
            </a>
            <div class="user-details">
              <p><a href="/profile/<%= user._id %>"><%= user.fullname %></a></p>
              <p><%= user.email %></p>
            </div>
          </div>
        <% }) %>
      <% } else { %>
        <p>No users found.</p>
      <% } %>
      
      <h2>Blogs</h2>
      <% if (blogs && blogs.length > 0) { %>
        <% blogs.forEach(blog => { %>
          <div class="blog-result">
            <h3><a href="/blog/<%= blog._id %>"><%= blog.title %></a></h3>
            <p><%= blog.body.substring(0, 150) %>...</p>
            <p>By <a href="/profile/<%= blog.createdBy._id %>"><%= blog.createdBy.fullname %></a></p>
          </div>
        <% }) %>
      <% } else { %>
        <p>No blogs found.</p>
      <% } %>
    </div>
  </div>
</body>
</html>
